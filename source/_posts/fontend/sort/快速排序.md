---
title: 十大排序算法（五）— 快速排序
excerpt: 快速排序是一种高效的排序算法，它的基本思想是通过一趟排序将待排序的数组分成两个子数组，其中一个子数组的所有元素都小于另一个子数组的所有元素，然后对这两个子数组递归地进行快速排序，直到所有元素都有序。
categories:
 - [前端, javascript]
 - [算法, 排序算法]
tags: 
 - 前端
 - 算法
 - javascript
 - 排序算法
---

# 快速排序

快速排序是一种高效的排序算法，它的基本思想是通过一趟排序将待排序的数组分成两个子数组，其中一个子数组的所有元素都小于另一个子数组的所有元素，然后对这两个子数组递归地进行快速排序，直到所有元素都有序。

## 快速排序的实现

要实现快速排序，我们需要一个函数来划分数组，即将一个数组按照一个基准值（pivot）分成两部分，左边的部分都小于等于基准值，右边的部分都大于基准值。我们可以选择任意一个元素作为基准值，这里我们选择第一个元素。

```js
// 划分函数
function partition(arr, left, right) {
  // 选择第一个元素作为基准值
  let pivot = arr[left];
  // 定义两个指针，i指向左边第二个元素，j指向右边最后一个元素
  let i = left + 1;
  let j = right;
  // 当i和j没有相遇时，循环执行以下操作
  while (i <= j) {
    // 如果i指向的元素小于等于基准值，则i右移一位
    while (i <= j && arr[i] <= pivot) {
      i++;
    }
    // 如果j指向的元素大于基准值，则j左移一位
    while (i <= j && arr[j] > pivot) {
      j--;
    }
    // 如果此时i还在j的左边，则交换i和j指向的元素
    if (i < j) {
      swap(arr, i, j);
      i++;
      j--;
    }
  }
  // 最后交换left和j指向的元素，使得基准值位于正确的位置
  swap(arr, left, j);
  // 返回基准值的索引
  return j;
}

// 辅助函数，用于交换数组中两个位置的元素
function swap(arr, i, j) {
  let temp = arr[i];
  arr[i] = arr[j];
  arr[j] = temp;
}
```

有了划分函数之后，我们就可以写出快速排序函数了。它接收三个参数：待排序的数组arr、起始索引left和结束索引right。如果left小于right，则说明还有至少两个元素需要排序。此时我们调用划分函数得到基准值所在位置pivotIndex，并对左右两个子数组递归地进行快速排序。

```js
// 快速排序函数
function quickSort(arr, left = 0, right = arr.length - 1) {
  // 如果起始索引小于结束索引，则说明还有至少两个元素需要排序
  if (left < right) {
    // 调用划分函数得到基准值所在位置pivotIndex
    let pivotIndex = partition(arr, left, right);
    // 对左边子数组进行快速排序
    quickSort(arr, left, pivotIndex - 1);
    // 对右边子数组进行快速排序
    quickSort(arr, pivotIndex + 1, right);
  }
}
```

## 总结

快速排序是一种不稳定（相同大小数据可能会改变顺序）但高效（平均时间复杂度为O(nlogn)，最坏情况为O(n^2)，空间复杂度为O(logn)）的算法。它是一种原地排序算法，不需要额外空间。它也是一种不稳定排序算法，即可能改变相同元素之间的相对顺序。它适合处理大规模且无序或近乎无序。

